<script src="/js/angular_deviceListAll.js"></script>
<script type="text/javascript">
    var sortingOrder = 'id';
</script>

<div class="row">
    <div ng-controller="ctrlDeviceListAll">
        <div class="panel panel-primary">
                <div ng-init="fecthItems()"></div>

                <div class="panel-heading">
                    <i class="glyphicon glyphicon-tasks"></i>
                    Devices ({{countItems()}})
                </div>

                <div class="panel-body">
                    <input type="text" ng-model="query" ng-change="search()" class="input-large search-query form-control pull-right" placeholder="Search"/>
                    <br/><br/>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th class="device_id">
                                <small># &nbsp;<a ng-click="sort_by('device_id')"><i
                                            class="glyphicon glyphicon-sort"></i></a></small>
                            </th>
                            <th class="device_serial col-sm-1">
                                <small>Serial # &nbsp;<a ng-click="sort_by('device_serial')"><i
                                            class="glyphicon glyphicon-sort"></i></a></small>
                            </th>
                            <th class="device_name col-sm-1">
                                <small>Name &nbsp;<a ng-click="sort_by('device_name')"><i
                                            class="glyphicon glyphicon-sort"></i></a></small>
                            </th>
                            <th class="productfamily_name col-sm-1">
                                <small>Category &nbsp;<a ng-click="sort_by('productfamily_name')"><i
                                            class="glyphicon glyphicon-sort"></i></a></small>
                            </th>
                            <th class="product_name">
                                <small>Product &nbsp;<a ng-click="sort_by('product_name')"><i
                                            class="glyphicon glyphicon-sort"></i></a></small>
                            </th>
                            <th class="location">
                                <small>Location</small>
                            </th>
                            <th class="col-sm-1"><a href="#modalAddDevice" role="button" data-toggle="modal"
                                                    class="glyphicon glyphicon-plus-sign"></a></th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <td colspan="6">
                                    <ul class="pager">
                                        <li ng-class="{disabled: currentPage == 0}">
                                            <a href ng-click="gotoPage(0)">First</a>
                                        </li>
                                        <li ng-class="{disabled: currentPage == 0}">
                                            <a href ng-click="prevPage()">« Prev</a>
                                        </li>
                                        <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                                            <a href ng-click="nextPage()">Next »</a>
                                        </li>
                                        <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                                            <a href ng-click="gotoPage(pagedItems.length - 1)">Last</a>
                                        </li>
                                    </ul>
                            </td>
                            </tr>
                        </tfoot>
                        <tbody>
                        <tr ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse">
                            <td><small>{{item.device_id}}</small></td>
                            <td><small>{{item.device_serial}}</small></td>
                            <td><small>{{item.device_name}}</small></td>
                            <td><small>{{item.productfamily_name}}</small></td>
                            <td><small>{{item.product_name}}</small></td>
                            <td>
                                <small>
                                    <a href="/geolocation/{{item.geolocation_id}}">{{item.geolocation_name}}</a> /
                                    <a href="/geolocation/{{item.geolocation_id}}/site/{{item.site_id}}">{{item.site_name}}</a> /
                                    <a href="/geolocation/{{item.geolocation_id}}/site/{{item.site_id}}/building/{{item.building_id}}">{{item.building_name}}</a> /
                                    <a href="/geolocation/{{item.geolocation_id}}/site/{{item.site_id}}/building/{{item.building_id}}/floor/{{item.floor_id}}">{{item.floor_name}}</a> /
                                    <a href="/geolocation/{{item.geolocation_id}}/site/{{item.site_id}}/building/{{item.building_id}}/floor/{{item.floor_id}}/closet/{{item.closet_id}}">{{item.closet_name}}</a>
                                </small>
                            </td>
                            <td>
                                <a href="#modalEditDevice" data-toggle="modal" data-id="{{item.device_id}}" data-name="{{item.device_name}}" class="open-EditDevice glyphicon glyphicon-pencil" title="edit"></a>
                                <a href="#modalDeleteDevice" data-toggle="modal" data-id="{{item.device_id}}" data-name="{{item.device_name}}" class="open-DeleteDevice glyphicon glyphicon-remove" title="delete"></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
    </div>
</div>
<br/>
