<% layout('adminLayout') -%>
<script src="/js/angular_userDetails.js"></script>
<script type="text/javascript">
    var userid = <%= user.id %>;
</script>

<div ng-controller="ctrlUserDetails">
    <div ng-init="fecthItems()"></div>

    <ul class="nav nav-tabs">
        <li role="presentation" class="active"><a href="#User" data-toggle="tab"><i class="fa fa-user"></i> {{item.information.name}}</a></li>
    </ul>

    <div id='content' class="tab-content">
        <div class="tab-pane active" id="User">
            <div class="panel panel-default" style="border-top: medium none; border-top-left-radius: 0px; border-top-right-radius: 0px;">
            <div class="row">
                <div class="col-sm-2 profile-pic" style="padding-top: 20px;">
                    <img src="/img/avatars/avatar.png" class="center-block" style="vertical-align: middle">
                </div>
                <div class="col-sm-8">
                    <h1>{{item.information.name}}<br><small>{{item.information.position}}</small></h1>

                    <p class="text-muted">
                        <div class="text-muted" ng-show="item.information.username.trim() != '' ">
                            <i class="fa fa-user"></i> {{item.information.username}} (<a href="#modalUpdateUserPassword" data-toggle="modal" title="Update password">password</a>)
                        </div>
                        <div class="text-muted" ng-show="item.information.username.trim() == '' ">
                            <i class="fa fa-user"></i>   <a href="#modalAddUserUsername" role="button" data-toggle="modal" class="glyphicon glyphicon-plus-sign text-success" title="Create a Username" style="padding-left: 2px padding-right: 20px"></a>
                        </div>
                    </p>
                    <ul class="list-unstyled">
                        <div ng-repeat="telephone in item.telephones">
                            <li>
                                <p class="text-muted">
                                    <i class="fa fa-phone"></i> <a href="tel:{{telephone.telephone}}" target="_blank">{{telephone.telephone}}</a>
                                    <small><i>{{telephone.title}}</i></small>
                                </p>
                            </li>
                        </div>
                        <div ng-repeat="email in item.emails">
                            <li>
                                <p class="text-muted">
                                    <i class="fa fa-envelope"></i> <a href="mailto:{{email.email}}" target="_blank">
                                        {{email.email}}</a>
                                    <small><i>{{email.title}}</i></small>
                                </p>
                            </li>
                        </div>
                        <div ng-repeat="address in item.addresses">
                            <li>
                                <p class="text-muted">
                                    <i class="fa fa-map-marker"></i> <a
                                            href="http://maps.google.com/?q={{address.address1}}, {{address.city}}, {{address.state}} {{address.zipcode}}"
                                            target="_blank"> {{address.address1}}, {{address.city}}, {{address.state}}
                                        {{address.zipcode}} </a>
                                </p>
                            </li>
                        </div>
                    </ul>
                </div>
                <div class="col-sm-2">
                    <div style="padding-top: 20px">
                    <i class="fa fa-phone" style="padding-left: 10px"></i><a href="#modalAddUserTelephone" role="button" data-toggle="modal" class="glyphicon glyphicon-plus-sign text-success" title="Add Telephone" style="padding-left: 2px"></a>
                    <i class="fa fa-envelope" style="padding-left: 10px"></i><a href="#modalAddUserEmail" role="button" data-toggle="modal" class="glyphicon glyphicon-plus-sign text-success" title="Add Telephone" style="padding-left: 2px"></a>
                    <i class="fa fa-map-marker" style="padding-left: 10px"></i><a href="#modalAddUserAddress" role="button" data-toggle="modal" class="glyphicon glyphicon-plus-sign text-success" title="Add Telephone" style="padding-left: 2px"></a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <hr>
                    <div class="padding-10">

                        <ul class="nav nav-tabs tabs-pull-right">
                            <li class="">
                                <a href="#" data-toggle="tab"></a>
                            </li>
                            <li class="active">
                                <a href="#a1" data-toggle="tab">Comments</a>
                            </li>
                            <li>
                                <a href="#a2" data-toggle="tab">Notes</a>
                            </li>
                            <li class="pull-left">
                                <span class="margin-top-10 display-inline"><i class="fa fa-rss text-success"></i> Activity</span>
                            </li>
                        </ul>

                        <div class="tab-content padding-top-10">
                            <div class="tab-pane fade in active" id="a1">

                                <div class="row">

                                    <div class="col-xs-2 col-sm-1">
                                        <time datetime="2014-09-20" class="icon">
                                            <strong>Jan</strong>
                                            <span>10</span>
                                        </time>
                                    </div>

                                    <div class="col-xs-10 col-sm-11">
                                        <h6 class="no-margin"><a href="javascript:void(0);">Allice in Wonderland</a></h6>
                                        <p>
                                            Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi Nam eget dui.
                                            Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero,
                                            sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel.
                                        </p>
                                    </div>

                                    <div class="col-sm-12">

                                        <hr>

                                    </div>

                                    <div class="col-xs-2 col-sm-1">
                                        <time datetime="2014-09-20" class="icon">
                                            <strong>Jan</strong>
                                            <span>10</span>
                                        </time>
                                    </div>

                                    <div class="col-xs-10 col-sm-11">
                                        <h6 class="no-margin"><a href="javascript:void(0);">World Report</a></h6>
                                        <p>
                                            Morning our be dry. Life also third land after first beginning to evening cattle created let subdue you'll winged don't Face firmament.
                                            You winged you're was Fruit divided signs lights i living cattle yielding over light life life sea, so deep.
                                            Abundantly given years bring were after. Greater you're meat beast creeping behold he unto She'd doesn't. Replenish brought kind gathering Meat.
                                        </p>
                                    </div>

                                    <div class="col-sm-12">

                                        <br>

                                    </div>

                                </div>

                            </div>
                            <div class="tab-pane fade" id="a2">

                                <div class="alert alert-info fade in">
                                    <button class="close" data-dismiss="alert">
                                        Ã—
                                    </button>
                                    <i class="fa-fw fa fa-info"></i>
                                    <strong>51 new members </strong>joined today!
                                </div>

                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/female.png"><a href="javascript:void(0);">Jenn Wilson</a>
                                    <div class="email">
                                        travis@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Marshall Hitt</a>
                                    <div class="email">
                                        marshall@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Joe Cadena</a>
                                    <div class="email">
                                        joe@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Mike McBride</a>
                                    <div class="email">
                                        mike@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Travis Wilson</a>
                                    <div class="email">
                                        travis@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Marshall Hitt</a>
                                    <div class="email">
                                        marshall@company.com
                                    </div>
                                </div>
                                <div class="user" title="Joe Cadena joe@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Joe Cadena</a>
                                    <div class="email">
                                        joe@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Mike McBride</a>
                                    <div class="email">
                                        mike@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Marshall Hitt</a>
                                    <div class="email">
                                        marshall@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);">Joe Cadena</a>
                                    <div class="email">
                                        joe@company.com
                                    </div>
                                </div>
                                <div class="user" title="email@company.com">
                                    <img src="img/avatars/male.png"><a href="javascript:void(0);"> Mike McBride</a>
                                    <div class="email">
                                        mike@company.com
                                    </div>
                                </div>

                                <div class="text-center">
                                    <ul class="pagination pagination-sm">
                                        <li class="disabled">
                                            <a href="javascript:void(0);">Prev</a>
                                        </li>
                                        <li class="active">
                                            <a href="javascript:void(0);">1</a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">2</a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">3</a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">...</a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">99</a>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);">Next</a>
                                        </li>
                                    </ul>
                                </div>

                            </div><!-- end tab -->
                        </div>

                    </div>

                </div>
            </div>
            </div>
        </div>
    </div>
</div>

<!--Modals-->
<div class="modal" tabindex="-1" role="dialog" id="modalAddUserTelephone" aria-labelledby="modalAddLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>
                <h3>Add a Telephone number</h3>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal" action="/admin/user/<%= user.id%>/telephones/add" method="post">
                    <input type="hidden" name="userid" value="<%= user.id%>" class="hidden">
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="telephone">Telephone</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="telephone" name="telephone" placeholder="Telephone Number"
                                   autofocus/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="title">Title</label>
                        <div class="col-md-8">
                            <select id="title" name="title" class="telephoneTitleSelectPicker" data-width="100%">
                                <option>Office</option>
                                <option>Pager</option>
                                <option>On Call</option>
                                <option>Personal</option>
                                <option>Other</option>
                              </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="submitbutton"></label>
                        <div class="col-md-8">
                            <button type="submit" id="submitbutton" class="btn btn-success btn-block">Add</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    $('.telephoneTitleSelectPicker').selectpicker();
</script>

<div class="modal" tabindex="-1" role="dialog" id="modalAddUserEmail" aria-labelledby="modalAddLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>

                <h3>Add an Email Address</h3>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal" action="/admin/user/<%= user.id %>/emails/add" method="post">
                    <input type="hidden" name="userid" value="<%= user.id %>" class="hidden">

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="email">Email</label>

                        <div class="col-md-8">
                            <input type="text" class="form-control" id="email" name="email" placeholder="Email"
                                   autofocus/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="title">Title</label>

                        <div class="col-md-8">
                            <select id="title" name="title" class="emailTitleSelectPicker" data-width="100%">
                                <option>Office</option>
                                <option>Personal</option>
                                <option>Mailing List</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="col-md-2 control-label" for="submitbutton"></label>

                        <div class="col-md-8">
                            <button type="submit" id="submitbutton" class="btn btn-success btn-block">Add</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    $('.emailTitleSelectPicker').selectpicker();
</script>

<div class="modal" tabindex="-1" role="dialog" id="modalAddUserAddress" aria-labelledby="modalAddLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>

                <h3>Add a New Address</h3>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal" action="/admin/user/<%= user.id %>/addresses/add"
                      method="post">
                    <input type="hidden" name="userid" value="<%= user.id %>" class="hidden">

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="address1">Street</label>

                        <div class="col-md-8">
                            <input type="text" class="form-control" id="address1" name="address1" placeholder="Street"
                                   autofocus/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="city">City</label>

                        <div class="col-md-8">
                            <input type="text" class="form-control" id="city" name="city" placeholder="City"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="state">State</label>

                        <div class="col-md-8">
                            <select id="state" name="state" class="addressStateSelectPicker" data-width="100%">
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="DC">District Of Columbia</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL">Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="MO">Missouri</option>
                                <option value="MT">Montana</option>
                                <option value="NE">Nebraska</option>
                                <option value="NV">Nevada</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA" selected="selected">Pennsylvania</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="TX">Texas</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                                <option value="">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="zipcode">Zip Code</label>

                        <div class="col-md-8">
                            <input type="text" class="form-control" id="zipcode" name="zipcode" placeholder="Zip Code"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="submitbutton"></label>

                        <div class="col-md-8">
                            <button type="submit" id="submitbutton" class="btn btn-success btn-block">Add</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    $('.addressStateSelectPicker').selectpicker();
</script>

<div class="modal" tabindex="-1" role="dialog" id="modalAddUserUsername" aria-labelledby="modalAddLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>
                <h3>Add a Username</h3>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal" action="/admin/user/<%= user.id%>/username/update" method="post">
                    <input type="hidden" name="userid" value="<%= user.id%>" class="hidden">
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="username">Username</label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" id="username" name="username" placeholder="Username" autofocus/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="submitbutton"></label>
                        <div class="col-md-4">
                        <button type="submit" id="submitbutton" class="btn btn-success btn-block">Add</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalUpdateUserPassword" aria-labelledby="modalAddLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>
                <h3>Update Password</h3>
            </div>
            <div class="modal-body">
                <form id="updateUserPasswordForm" class="form-horizontal" action="/admin/user/<%= user.id%>/password/update" method="post">
                    <input type="hidden" name="userid" value="<%= user.id%>" class="hidden">
                    <div class="form-group">
                        <label class="col-md-2 control-label" for="password">Password</label>
                        <div class="col-md-8">
                          <input id="password" name="password" type="password" placeholder="Password" class="form-control input-md" autofocus>
                        </div>
                    </div>

                    <div class="form-group">
                      <label class="col-md-2 control-label" for="confirmPassword">Confirm</label>
                      <div class="col-md-8">
                        <input id="confirmPassword" name="confirmPassword" type="password" placeholder="Confirm" class="form-control input-md">
                      </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-2 control-label" for="submitbutton"></label>
                        <div class="col-md-8">
                        <button type="submit" id="submitbutton" class="btn btn-primary btn-block">Update</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $('#updateUserPasswordForm').bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                password: {
                    validators: {
                        identical: {
                            field: 'confirmPassword',
                            message: 'The password and its confirm are not the same'
                        }
                    }
                },
                confirmPassword: {
                    validators: {
                        identical: {
                            field: 'password',
                            message: 'The password and its confirm are not the same'
                        }
                    }
                }
            }
        });
    });
</script>