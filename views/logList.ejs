<% layout('adminLayout') -%>
</br></br>
<script src="/js/angular_log.js"></script>
<script type="text/javascript">
    var sortingOrder = 'id';
</script>

<div class="row">
    <div ng-controller="ctrlLog">
        <div class="panel panel-primary">
                <div class="panel-heading">
                    <i class="glyphicon glyphicon-tasks"></i>
                    Logs <% if(logs) { %> (<%= logs.length %>) <% } %>
                </div>

                <div class="panel-body">
                    <input type="text" ng-model="query" ng-change="search()" class="input-large search-query form-control pull-right" placeholder="Search" autofocus/>
                    <br/><br/>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th class="id"># &nbsp;<a ng-click="sort_by('id')"><i
                                            class="glyphicon glyphicon-sort"></i></a></th>
                            <th class="date col-sm-1">Date &nbsp;<a ng-click="sort_by('date')"><i
                                            class="glyphicon glyphicon-sort"></i></a></th>
                            <th class="action col-sm-1">Action &nbsp;<a ng-click="sort_by('action')"><i
                                            class="glyphicon glyphicon-sort"></i></a></th>
                            <th class="model col-sm-1">Model &nbsp;<a ng-click="sort_by('model')"><i
                                            class="glyphicon glyphicon-sort"></i></a></th>
                            <th class="text">Text</th>
                            <th class="author">Author &nbsp;<a ng-click="sort_by('author')"><i
                                            class="glyphicon glyphicon-sort"></i></a></th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <td colspan="6">
                                    <ul class="pager">
                                        <li ng-class="{disabled: currentPage == 0}">
                                            <a href ng-click="prevPage()">« Prev</a>
                                        </li>
                                        <li ng-repeat="n in range(pagedItems.length)"
                                            ng-class="{active: n == currentPage}"
                                            ng-click="setPage()">
                                            <a href ng-bind="n + 1">1</a>
                                        </li>
                                        <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                                            <a href ng-click="nextPage()">Next »</a>
                                        </li>
                                    </ul>
                            </td>
                            </tr>
                        </tfoot>
                        <tbody>
                        <tr ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse">
                            <td>{{item.id}}</td>
                            <td>{{item.createdAt}}</td>
                            <td>{{item.action}}</td>
                            <td>{{item.model}}</td>
                            <td>{{item.text}}</td>
                            <td>{{item.author}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
    </div>
</div>
<br/>
