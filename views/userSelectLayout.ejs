<script src="/js/angular_userSelect.js"></script>
<script type="text/javascript">
    var sortingOrder = 'productcategories_name';
</script>

<div ng-controller="ctrlUserSelect">
    <div ng-init="fecthItems()"></div>
    <input type="hidden" id="field_userId" name="field_userId" value="{{selectedItem.id}}"/>
    <div ng-show="!selectedItem">
    <input type="text" ng-model="query" ng-change="search()" class="input-large search-query form-control pull-right" placeholder="Search" autofocus/>
    <br/><br/>
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th class="id col-sm-1 "></th>
            <th class="name col-sm-11"><small>Name &nbsp;<a ng-click="sort_by('name')"><i class="glyphicon glyphicon-sort"></i></a></small></th>
        </tr>
        </thead>
        <tfoot>
        <tr>
            <td colspan="6">
                <ul class="pager">
                    <li ng-class="{disabled: currentPage == 0}">
                        <a href ng-click="gotoPage(0)">First</a>
                    </li>
                    <li ng-class="{disabled: currentPage == 0}">
                        <a href ng-click="prevPage()">« Prev</a>
                    </li>
                    <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                        <a href ng-click="nextPage()">Next »</a>
                    </li>
                    <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                        <a href ng-click="gotoPage(pagedItems.length - 1)">Last</a>
                    </li>
                </ul>
            </td>
        </tr>
        </tfoot>
        <tbody>
        <tr ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse">
            <td>
                <input type="radio" ng-model="$parent.selectedUser" ng-change="changeSelection(item)" ng-value="item.id" value="{{item.id}}" name="selectedUser">
            </td>
            <td><small>{{item.name}}</small></td>
        </tr>
        </tbody>
    </table>
    </div>
    <div ng-show="selectedItem">
        <table>
            <tr>
                <td class="col-sm-2"><a href="" ng-click="resetSelectedItem()">remove</a></td>
                <td class="col-sm-10"><strong>{{selectedItem.name}}</strong></td>
            </tr>
        </table>
    </div>
</div>
